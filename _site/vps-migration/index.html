<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Setting up a Continuous Delivery Blog &#8211; Getting Saucy</title>
<meta name="description" content="Just some ramblings of yet another insomniatic developer">
<meta name="keywords" content="cloud, continuous delivery, continuous integration, blog">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/">
<meta name="twitter:title" content="Setting up a Continuous Delivery Blog">
<meta name="twitter:description" content="Just some ramblings of yet another insomniatic developer">
<meta name="twitter:creator" content="@grubernaut">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Setting up a Continuous Delivery Blog">
<meta property="og:description" content="Just some ramblings of yet another insomniatic developer">
<meta property="og:url" content="/vps-migration/">
<meta property="og:site_name" content="Getting Saucy">

<meta name="google-site-verification" content="ei2WLhJbqKrYSURjGsLxKrP3eSN5tN7XN5UVy9MHaJk">



<link rel="canonical" href="/vps-migration/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Getting Saucy Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">




<style type="text/css">body {background-image:url(/images/background.jpg);}</style>


</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Jake Champlin photo" class="author-photo">
					<h4>Jake Champlin</h4>
					<p>I'm just another insomniac working as a developer, operator, SysAd, hacker, and a student.</p>
				</li>
				<li><a href="/about/">Learn More</a></li>
				<li>
					<a href="mailto:jake.champlin.27@gmail.com"><i class="icon-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/grubernaut"><i class="icon-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="http://facebook.com/jake.champlin.27"><i class="icon-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="http://github.com/grubernaut"><i class="icon-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="https://news.ycombinator.com">Hacker News</a></li><li><a href="http://open.spotify.com/user/1284133748">Spotify Channel</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="/vps-migration/" rel="bookmark" title="Setting up a Continuous Delivery Blog">Setting up a Continuous Delivery Blog</a></h1>
        
        <h2>June 21, 2014</h2>
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <figure>
  <img src="/images/vps/digitalocean.jpeg" />
  <figcaption>Digital Ocean - https://twitter.com/bryanl/status/479606602186895360</figcaption>
</figure>

<h3 id="background">Background</h3>
<p>Growing up I never really had the capital to invest in a home setup, nor were my parents ever going to let me near the networking equipment after capturing packets of web traffic from my parents. Getting my own house for the first time last year and purchasing my own networking equipment opened up a lot of doors for me. I was now able to finally publish something on the public internet that I owned. The only problem with this arose with the financial costs of running bare metal servers at home, and the overhead cost I would need to begin such a project. </p>

<p>I was talking to Brandon Burton (<a href="https://twitter.com/solarce">@solarce</a>) recently and he told me stories of his first stack that he hosted himself. Remembering that I still hadn’t achieved that goal yet, I set out to remedy this problem as quickly as I could. </p>

<p>Owning bare metal servers would still be a costly venture for me today. I would have to pay for the power consumption, the networking equipment to ensure security, and the increased bandwidth of my internet connection. Thus, configuring a VPS would be my best option. </p>

<p>I chose Digital Ocean purely out of simplicity. I could have gone the Amazon AWS route, and still may in the future, but I wanted to start this project ASAP, and was itching to get tinkering with setup. This is my bare and basic write-up of how I migrated my Jekyll blog from a GitHub Pages site to a cloud hosted blog with Digital Ocean. </p>

<h2 id="migrating-my-personal-blog-to-a-digital-ocean-droplet">Migrating my personal blog to a Digital Ocean Droplet</h2>
<p>First things first, I needed to actually create a <a href="https://www.digitalocean.com">Digital Ocean</a> Droplet. Creating a droplet on <a href="https://www.digitalocean.com">Digital Ocean</a> was actually the easiest part of this whole process. I was entirely pleased with the whole setup of my account, the ease of integrating 2-Factor Authentication, and setting up billing via PayPal for my droplet. </p>

<h3 id="setting-up-a-digital-ocean-droplet">Setting up a Digital Ocean Droplet</h3>
<p>Once I had a few coins in my Digital Ocean account and my SSH-keys added to my Digital Ocean account, starting a new Digital Ocean droplet couldn’t have been easier. I selected the type of VPS that I wanted, the image I wanted on it, the SSH-Keys I needed, and I was good to go. In 60 seconds I had a working droplet with Ubuntu-14.04 and root access. I was in! </p>

<h3 id="buying-a-domain-name">Buying a Domain Name</h3>
<p>To be honest, I didn’t particularly shop around for the cheapest domain name available, and went with the simpler option of GoDaddy.com. All jokes aside, it was a fairly simple and easy process that allowed me to pay via PayPal for my domain name. $13 bucks and I had grubernaut.com as a domain name. </p>

<h3 id="routing-dns-from-godaddy-to-digital-ocean">Routing DNS from GoDaddy to Digital Ocean</h3>
<p>This…. took me a while. I had to remember that GoDaddy.com was the DNR for the domain, and would need different nameservers specified to point to Digital Ocean. After removing all of the A Records, CNAME Records, and MX Records that GoDaddy.com initializes with, I was left with a bare Zone Record on GoDaddy.com. Aside from the three nameservers provided from Digital Ocean. </p>
<figure>
  <img src="/images/vps/nameservers.png" />
  <figcaption>Nameservers from Digital Ocean</figcaption>
</figure>

<p>After adding the correct nameservers to GoDaddy.com, I then had to edit my Digital Ocean’s Zone File as well. I needed an A Record that pointed all traffic to my blog, as well as specific trafic for my blog to route correctly. </p>
<figure>
  <img src="/images/vps/do-dns1.jpg" />
  <figcaption>DNS on Digital Ocean</figcaption>
</figure>

<p>Having that all setup, I was now able to ping grubernaut.com, www.grubernaut.com, and blog.grubernaut.com and have them all resolve to my blog droplet’s IP address. </p>

<h3 id="setting-up-continuous-delivery">Setting up Continuous Delivery</h3>
<p>Setting up continuous delivery inside of my droplet was fairly easy since I was using Git as a versioning tool. 
First, I logged into my droplet and created a remote git server. 
Then, I initialized a bare repository, and created a new post-receive hook. (This would be where the continuous delivery comes in!). </p>

<div class="highlight"><pre><code class="bash"><span class="lineno">1</span> mkdir grubernaut.blog.git
<span class="lineno">2</span> <span class="nb">cd </span>grubernaut.blog.git
<span class="lineno">3</span> git --bare init
<span class="lineno">4</span> touch hooks/post-receive
</code></pre></div>

<p>I opened up the <strong>only</strong> editor there is (ViM) and wrote my post-receive hook. </p>

<div class="highlight"><pre><code class="bash"><span class="lineno"> 1</span> <span class="c">#!/bin/bash</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="nv">GIT_REPO</span><span class="o">=</span><span class="nv">$HOME</span>/grubernaut.blog.git
<span class="lineno"> 4</span> <span class="nv">TMP_GIT_CLONE</span><span class="o">=</span><span class="nv">$HOME</span>/tmp/grubernaut.blog
<span class="lineno"> 5</span> <span class="nv">PUBLIC_WWW</span><span class="o">=</span>/var/www/grubernaut.blog
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span> git clone <span class="nv">$GIT_REPO</span> <span class="nv">$TMP_GIT_CLONE</span>
<span class="lineno"> 8</span> jekyll build -s <span class="nv">$TMP_GIT_CLONE</span> -d <span class="nv">$PUBLIC_WWW</span>
<span class="lineno"> 9</span> rm -Rf <span class="nv">$TMP_GIT_CLONE</span>
<span class="lineno">10</span> <span class="nb">exit</span>
</code></pre></div>

<p>This hook would clone my repository into a temporary directory, build my site with jekyll, and place the built site into a public directory. And this hook would run after every commit that was received. </p>

<p>The only thing left to do on my droplet was to configure Apache2 to point to <code>/var/www/grubernaut.blog/</code> and I was all set!</p>

<h3 id="configuring-workstation-repo">Configuring Workstation Repo</h3>
<p>On my development workstation, I had to do some slight configuration to be able to push to my droplet and have it be automagically deployed. Luckily this is just a simple one-line git command. 
<code>bash
git remote add deploy &lt;user&gt;@&lt;site&gt;:~/&lt;path-to-repo&gt;.git
</code>
From there I can now run a <code>git push deploy master</code> and git will take care of the deployment chain for me. </p>

<h3 id="final-thoughts-and-future-plans">Final Thoughts and Future Plans</h3>
<p>Overall, this was a tremendous learning experience for me, and a great introduction to VPS’s. My goal now is to spin up more Droplets on Digital Ocean and start building a full stack of Droplets. 
Things like: </p>

<ul>
  <li>A VPN Server</li>
  <li>A ZNC IRC Bouncer (Something I’ve wanted for a while)</li>
  <li>A Sensu Server to monitor my stack</li>
  <li>etc…</li>
</ul>

<p>Eventually I would love to have this whole setup served from Chef cookbooks, and fully automated. This was a great introduction to how the infrastructure in Cloud-Land works though. </p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="/tags/#cloud" title="Pages tagged cloud" class="tag">cloud</a><a href="/tags/#continuous delivery" title="Pages tagged continuous delivery" class="tag">continuous delivery</a><a href="/tags/#continuous integration" title="Pages tagged continuous integration" class="tag">continuous integration</a><a href="/tags/#blog" title="Pages tagged blog" class="tag">blog</a></span>
        <span><a href="/vps-migration/" rel="bookmark" title="Setting up a Continuous Delivery Blog">Setting up a Continuous Delivery Blog</a> was published on <span class="entry-date date published updated"><time datetime="2014-06-21T00:00:00-04:00">June 21, 2014</time></span></span>
        (revised: <span class="entry-date date modified"><time datetime="2014-06-21 18:29:10 UTC">06/21/2014</time></span>)
        <span class="author vcard"><span class="fn"><a href="/about/" title="About Jake Champlin">Jake Champlin</a></span></span>
        <div class="social-share">
          <ul class="socialcount socialcount-small inline-list">
            <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=/vps-migration/" title="Share on Facebook"><span class="count"><i class="icon-facebook-sign"></i> Like</span></a></li>
            <li class="twitter"><a href="https://twitter.com/intent/tweet?text=/vps-migration/" title="Share on Twitter"><span class="count"><i class="icon-twitter-sign"></i> Tweet</span></a></li>
            <li class="googleplus"><a href="https://plus.google.com/share?url=/vps-migration/" title="Share on Google Plus"><span class="count"><i class="icon-google-plus-sign"></i> +1</span></a></li>
          </ul>
        </div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="/the-effects-of-a-devops-community/" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="/some-brief-history/" title="Some Brief History">Some Brief History</a></h3>
          <p>> “Life is like topography, Hobbes. There are summits of happiness and success, flat stretches of boring routine and valleys of frustrati...&hellip; <a href="/some-brief-history/">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="/the-effects-of-a-devops-community/" title="The effects of a DevOps community">The effects of a DevOps community</a></h4>
            <span>Published on June 02, 2014</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="/soylent-day-1/" title="Soylent Day 1">Soylent Day 1</a></h4>
            <span>Published on May 21, 2014</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Jake Champlin. Powered by <a
		href="http://jekyllrb.com">Jekyll</a> and <a
		href="http://github.com/mmistkes">Made Mistakes</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50680600-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jchamplin-landing'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
